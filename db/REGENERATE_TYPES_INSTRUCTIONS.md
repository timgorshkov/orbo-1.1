# Инструкция по регенерации database.types.ts

## Текущий подход

Проект использует **серверную PostgreSQL** базу данных. Типы могут быть сгенерированы из текущей схемы БД.

## Генерация типов

### Вариант 1: Из серверной БД (рекомендуется)

```bash
# На сервере Selectel
ssh selectel-orbo

# Экспорт схемы
docker exec orbo_postgres pg_dump -U orbo -d orbo --schema-only --no-owner -f /backup/schema.sql

# Локально можно использовать инструменты типа pg-to-ts или kysely-codegen
```

### Вариант 2: Ручное обновление

При добавлении новых таблиц/колонок обновлять `lib/database.types.ts` вручную.

## Когда обновлять типы?

После каждой миграции, которая изменяет схему БД:
- Добавление/удаление таблиц
- Добавление/удаление/переименование колонок
- Изменение типов данных

## Связанные миграции

Миграции находятся в `db/migrations/`. После переезда на серверную БД 
новые миграции применяются напрямую через psql:

```bash
# Применить миграцию
docker exec orbo_postgres psql -U orbo -d orbo -f /path/to/migration.sql
```

---

**Примечание:** Проект мигрирован с Supabase на серверную PostgreSQL (январь 2026).
