# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ logout

## –î–∞—Ç–∞: 13.10.2025

## –û–±–∑–æ—Ä

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ 5 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞ –∏ —Ñ—É–Ω–∫—Ü–∏–µ–π –≤—ã—Ö–æ–¥–∞.

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 1: –ö–Ω–æ–ø–∫–∞ "–í—ã–π—Ç–∏" –Ω–µ —Ä–∞–∑—Ä—ã–≤–∞–ª–∞ —Å–µ—Å—Å–∏—é

### –ü—Ä–æ–±–ª–µ–º–∞
- –ö–Ω–æ–ø–∫–∞ "–í—ã–π—Ç–∏" —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏–ª–∞ –Ω–∞ —Ñ–æ—Ä–º—É –ª–æ–≥–∏–Ω–∞
- –ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –º–æ–∂–Ω–æ –±—ã–ª–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- Cookies –Ω–µ —É–¥–∞–ª—è–ª–∏—Å—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –†–µ—à–µ–Ω–∏–µ
**–§–∞–π–ª:** `app/api/auth/logout/route.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `cookieStore.set()` —Å `maxAge: 0` –≤–º–µ—Å—Ç–æ `cookieStore.delete()`
2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ cookies –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ `response.cookies.set()`
3. –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ `path: '/'` –∏ –¥—Ä—É–≥–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è

```typescript
// –£–¥–∞–ª—è–µ–º cookies –ø—Ä–∞–≤–∏–ª—å–Ω–æ
for (const cookie of supabaseCookies) {
  cookieStore.set(cookie.name, '', {
    maxAge: 0,
    expires: new Date(0),
    path: '/',
    sameSite: 'lax',
    secure: process.env.NODE_ENV === 'production'
  })
}

// –¢–∞–∫–∂–µ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö –æ—Ç–≤–µ—Ç–∞
const response = NextResponse.json({ success: true })
for (const cookie of supabaseCookies) {
  response.cookies.set(cookie.name, '', {
    maxAge: 0,
    expires: new Date(0),
    path: '/',
    sameSite: 'lax',
    secure: process.env.NODE_ENV === 'production'
  })
}
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç
‚úÖ –°–µ—Å—Å–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–∑—Ä—ã–≤–∞–µ—Ç—Å—è  
‚úÖ –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—Ö–æ–¥ –Ω–∞ admin —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é  
‚úÖ –í—Å–µ Supabase cookies –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É–¥–∞–ª—è—é—Ç—Å—è

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 2: –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–ª –Ω–∞ –∫–æ–¥—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –ü—Ä–æ–±–ª–µ–º–∞
- –ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–ª—Å—è –±–æ—Ç—É, –Ω–æ –æ—Ç–≤–µ—Ç–∞ –Ω–µ –±—ã–ª–æ
- –í –ë–î –∫–æ–¥—ã –ø–æ–º–µ—á–∞–ª–∏—Å—å `is_used=TRUE` –∏ `telegram_user_id` –∑–∞–ø–æ–ª–Ω—è–ª—Å—è
- –ß–µ—Ä–µ–∑ 3 –º–∏–Ω—É—Ç—ã –ø—Ä–∏—Ö–æ–¥–∏–ª–æ "–ù–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–π –∫–æ–¥"
- –°—Å—ã–ª–∫–∞ –¥–ª—è –≤—Ö–æ–¥–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∞—Å—å

### –ü—Ä–∏—á–∏–Ω–∞
- –ë–æ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª —Ç–æ–ª—å–∫–æ –∫–æ–º–∞–Ω–¥—ã –≤ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–∞—Ö
- –õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (private chat) –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–¥–∞ –≤—ã–∑—ã–≤–∞–ª—Å—è, –Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–æ—Å—å

### –†–µ—à–µ–Ω–∏–µ
**–§–∞–π–ª:** `app/api/telegram/webhook/route.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≥—Ä—É–ø–ø–æ–≤—ã—Ö –∏ –ª–∏—á–Ω—ã—Ö —á–∞—Ç–æ–≤:**
```typescript
// –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–æ–±—ã—Ç–∏–µ —á–µ—Ä–µ–∑ eventProcessingService (—Ç–æ–ª—å–∫–æ –¥–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤)
if (body.message?.chat?.type !== 'private') {
  const eventProcessingService = createEventProcessingService();
  eventProcessingService.setSupabaseClient(supabaseServiceRole);
  await eventProcessingService.processUpdate(body);
}
```

2. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ—Å—Ç–æ –∫–æ–¥–∞ (–±–µ–∑ –∫–æ–º–∞–Ω–¥—ã):**
```typescript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ –∫–æ–¥–æ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (6 hex —Å–∏–º–≤–æ–ª–æ–≤)
if (/^[0-9A-F]{6}$/i.test(text)) {
  console.log('[Webhook] Received auth code directly:', text);
  await handleAuthCode(body.message, text.toUpperCase());
}
```

3. **–°–æ–∑–¥–∞–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `handleAuthCode`:**
```typescript
async function handleAuthCode(message: any, code: string) {
  const chatId = message.chat.id;
  const from = message.from;
  
  // –í—ã–∑—ã–≤–∞–µ–º API –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–¥–∞
  const verifyResponse = await fetch('.../api/auth/telegram-code/verify', {
    method: 'POST',
    body: JSON.stringify({
      code,
      telegramUserId: from.id,
      telegramUsername: from.username,
      firstName: from.first_name,
      lastName: from.last_name
    })
  });
  
  if (verifyResponse.ok && verifyData.success) {
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å—Å—ã–ª–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    await telegramService.sendMessage(
      chatId,
      `‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!\n\n–û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É:\n${verifyData.sessionUrl}`
    );
  }
}
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç
‚úÖ –ë–æ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è  
‚úÖ –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ –∫–∞–∫ –∫–æ–º–∞–Ω–¥—É `/start CODE` —Ç–∞–∫ –∏ –ø—Ä–æ—Å—Ç–æ `CODE`  
‚úÖ –ë–æ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –æ—Ç–≤–µ—á–∞–µ—Ç —Å—Å—ã–ª–∫–æ–π –¥–ª—è –≤—Ö–æ–¥–∞  
‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –ª—é–±–æ–≥–æ —á–∞—Ç–∞

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 3: –ë–∏—Ç—ã–π QR-–∫–æ–¥

### –ü—Ä–æ–±–ª–µ–º–∞
- QR-–∫–æ–¥ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª—Å—è (–ø–æ–∫–∞–∑—ã–≤–∞–ª–∞—Å—å "–±–∏—Ç–∞—è" –∫–∞—Ä—Ç–∏–Ω–∫–∞)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å Google Charts API, –∫–æ—Ç–æ—Ä–∞—è –º–æ–≥–ª–∞ –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

### –†–µ—à–µ–Ω–∏–µ
**–§–∞–π–ª:** `app/api/auth/telegram-code/generate/route.ts`

**–ë—ã–ª–æ:**
```typescript
const qrUrl = `https://chart.googleapis.com/chart?cht=qr&chs=300x300&chl=${encodeURIComponent(deepLink)}`
```

**–°—Ç–∞–ª–æ:**
```typescript
// QR Server API - –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∏ –Ω–∞–¥–µ–∂–Ω—ã–π
const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(deepLink)}`
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç
‚úÖ QR-–∫–æ–¥ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞–¥–µ–∂–Ω—ã–π API –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ QR  
‚úÖ –†–∞–∑–º–µ—Ä –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 4: –ü–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –ü—Ä–æ–±–ª–µ–º–∞
- QR-–∫–æ–¥ –±—ã–ª –ø–µ—Ä–≤—ã–º —ç–ª–µ–º–µ–Ω—Ç–æ–º
- –ö–Ω–æ–ø–∫–∞ "–û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞" –≤–Ω–∏–∑—É
- –ù–µ—É–¥–æ–±–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ
–ü–æ—Ä—è–¥–æ–∫: **–ö–Ω–æ–ø–∫–∞ ‚Üí –ö–æ–¥ ‚Üí –¢–∞–π–º–µ—Ä ‚Üí QR**

### –†–µ—à–µ–Ω–∏–µ
**–§–∞–π–ª:** `components/auth/telegram-bot-auth.tsx`

**–ù–æ–≤—ã–π –ø–æ—Ä—è–¥–æ–∫:**
1. ‚úÖ **–ë–æ–ª—å—à–∞—è —Å–∏–Ω—è—è –∫–Ω–æ–ø–∫–∞** "–û—Ç–∫—Ä—ã—Ç—å @bot"
2. ‚úÖ **–ö–æ–¥ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏** (–∫—Ä—É–ø–Ω—ã–π, —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º)
3. ‚úÖ **–¢–∞–π–º–µ—Ä** –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á–µ—Ç–∞
4. ‚úÖ **QR-–∫–æ–¥** –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±

**–£–ª—É—á—à–µ–Ω–∏—è:**
- –ö–Ω–æ–ø–∫–∞ —É–≤–µ–ª–∏—á–µ–Ω–∞ (`py-6 text-lg`)
- –ö–æ–¥ –≤—ã–¥–µ–ª–µ–Ω –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º –∏ –∫—Ä—É–ø–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º (`text-3xl`)
- QR –≤—ã–Ω–µ—Å–µ–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Å–µ–∫—Ü–∏—é "–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±"
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∞ "–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–æ–¥, —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å"

### –†–µ–∑—É–ª—å—Ç–∞—Ç
‚úÖ –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤  
‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–± (–∫–Ω–æ–ø–∫–∞ + –∫–æ–¥) –Ω–∞ –ø–µ—Ä–≤–æ–º –ø–ª–∞–Ω–µ  
‚úÖ QR-–∫–æ–¥ –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø—Ü–∏—è  
‚úÖ –õ—É—á—à–∏–π UX –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 5: Deep link —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º start

### –ü—Ä–æ–±–ª–µ–º–∞
- Deep link –±—ã–ª `https://t.me/bot?start=CODE`
- –ö–æ–¥ –ù–ï –ø–æ–¥—Å—Ç–∞–≤–ª—è–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∏ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ, –Ω–∏ –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –±—ã–ª–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π

### –†–µ—à–µ–Ω–∏–µ
**–§–∞–π–ª—ã:** 
- `app/api/auth/telegram-code/generate/route.ts`
- `components/auth/telegram-bot-auth.tsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

1. **–£–±—Ä–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `start` –∏–∑ deep link:**
```typescript
// –ë—ã–ª–æ
const deepLink = `https://t.me/${botUsername}?start=${code}`

// –°—Ç–∞–ª–æ
const deepLink = `https://t.me/${botUsername}`
```

2. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:**
```typescript
// –ë—ã–ª–æ
<li>3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–¥ –±–æ—Ç—É (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—Å—è)</li>

// –°—Ç–∞–ª–æ
<li>2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –≤—ã—à–µ</li>
<li>3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–¥ –±–æ—Ç—É –≤ –ª–∏—á–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏</li>
```

3. **–ë–æ—Ç —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–¥ –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º:**
   - –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å `/start CODE`
   - –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ—Å—Ç–æ `CODE`
   - –û–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç

### –†–µ–∑—É–ª—å—Ç–∞—Ç
‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –±–µ–∑ –ª–æ–∂–Ω—ã—Ö –æ–±–µ—â–∞–Ω–∏–π  
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –Ω—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥  
‚úÖ Deep link –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –±–æ—Ç–∞, –∫–æ–¥ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é  
‚úÖ –ë–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

---

## –ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

| # | –ü—Ä–æ–±–ª–µ–º–∞ | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å |
|---|----------|------|--------|
| 1 | –ö–Ω–æ–ø–∫–∞ "–í—ã–π—Ç–∏" –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | `app/api/auth/logout/route.ts` | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 2 | –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–¥—ã | `app/api/telegram/webhook/route.ts` | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 3 | –ë–∏—Ç—ã–π QR-–∫–æ–¥ | `app/api/auth/telegram-code/generate/route.ts` | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 4 | –ù–µ—É–¥–æ–±–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ | `components/auth/telegram-bot-auth.tsx` | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 5 | Deep link —Å –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–º start | `app/api/auth/telegram-code/generate/route.ts` + UI | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: Logout
1. ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ —Å–∏—Å—Ç–µ–º–µ
2. ‚úÖ –ù–∞–∂–º–∏—Ç–µ "–í—ã–π—Ç–∏" –≤ –ª–µ–≤–æ–º –º–µ–Ω—é
3. ‚úÖ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –ª—é–±—É—é admin —Å—Ç—Ä–∞–Ω–∏—Ü—É
4. ‚úÖ **–û–∂–∏–¥–∞–µ—Ç—Å—è:** —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ª–æ–≥–∏–Ω–∞

### –¢–µ—Å—Ç 2: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞
1. ‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ —Å–æ–±—ã—Ç–∏–µ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
2. ‚úÖ –ù–∞–∂–º–∏—Ç–µ "–û—Ç–∫—Ä—ã—Ç—å @bot"
3. ‚úÖ –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥
4. ‚úÖ –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–¥ –±–æ—Ç—É (–ø—Ä–æ—Å—Ç–æ —á–∏—Å–ª–æ, –±–µ–∑ –∫–æ–º–∞–Ω–¥—ã)
5. ‚úÖ **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –±–æ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –æ—Ç–≤–µ—á–∞–µ—Ç —Å—Å—ã–ª–∫–æ–π –¥–ª—è –≤—Ö–æ–¥–∞

### –¢–µ—Å—Ç 3: QR-–∫–æ–¥
1. ‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
2. ‚úÖ –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ –¥–æ QR-–∫–æ–¥–∞
3. ‚úÖ **–û–∂–∏–¥–∞–µ—Ç—Å—è:** QR-–∫–æ–¥ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –¢–µ—Å—Ç 4: UX –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
1. ‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
2. ‚úÖ **–û–∂–∏–¥–∞–µ—Ç—Å—è –ø–æ—Ä—è–¥–æ–∫:** –ë–æ–ª—å—à–∞—è —Å–∏–Ω—è—è –∫–Ω–æ–ø–∫–∞ ‚Üí –ö–æ–¥ ‚Üí –¢–∞–π–º–µ—Ä ‚Üí QR
3. ‚úÖ –ö–æ–¥ –≤—ã–¥–µ–ª–µ–Ω, –∫—Ä—É–ø–Ω—ã–π, —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º
4. ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è

---

## –°—Ç–∞—Ç—É—Å

‚úÖ **5 –∏–∑ 5 –ø—Ä–æ–±–ª–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**  
‚úÖ **–û—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**: –ù–µ—Ç  
‚úÖ **–û—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞**: –ù–µ—Ç  
üéØ **–ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é**

---

**–í–µ—Ä—Å–∏—è**: 1.0  
**–ê–≤—Ç–æ—Ä**: AI Assistant  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 13.10.2025

