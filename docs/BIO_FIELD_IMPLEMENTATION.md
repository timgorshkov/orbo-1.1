# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ" (Bio) –¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

## –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤–æ–µ –ø–æ–ª–µ `bio` (–∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ) –¥–ª—è –ø—Ä–æ—Ñ–∏–ª–µ–π —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –≤ 60 —Å–∏–º–≤–æ–ª–æ–≤. –ü–æ–ª–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤–º–µ—Å—Ç–æ email –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø–æ–∏—Å–∫–µ.

## –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª**: `db/migrations/28_add_participant_bio.sql`

```sql
-- –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª–µ bio –¥–ª—è –∫—Ä–∞—Ç–∫–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞ (–¥–æ 60 —Å–∏–º–≤–æ–ª–æ–≤)
ALTER TABLE public.participants
ADD COLUMN IF NOT EXISTS bio text;

-- –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –¥–ª–∏–Ω—É
ALTER TABLE public.participants
ADD CONSTRAINT bio_max_length CHECK (char_length(bio) <= 60);

-- –°–æ–∑–¥–∞–µ–º –∏–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ bio
CREATE INDEX IF NOT EXISTS idx_participants_bio 
ON public.participants USING gin (to_tsvector('russian', coalesce(bio, '')));
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- **TEXT** —Ç–∏–ø –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏ (–≤–º–µ—Å—Ç–æ VARCHAR)
- **CHECK constraint** –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª–∏–Ω—ã –≤ 60 —Å–∏–º–≤–æ–ª–æ–≤
- **GIN –∏–Ω–¥–µ–∫—Å** —Å –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–º –ø–æ–∏—Å–∫–æ–º (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞)
- **NULL –¥–æ–ø—É—Å—Ç–∏–º** - –ø–æ–ª–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ

### 2. TypeScript —Ç–∏–ø—ã

**–§–∞–π–ª**: `lib/types/participant.ts`

```typescript
export interface ParticipantRecord {
  // ...
  phone: string | null;
  photo_url: string | null;
  bio: string | null; // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
  created_at: string;
  // ...
}
```

### 3. API Endpoint

**–§–∞–π–ª**: `app/api/participants/[participantId]/route.ts`

```typescript
const allowedFields = [
  'full_name', 'first_name', 'last_name', 'username', 
  'email', 'phone', 
  'bio', // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
  'activity_score', 'risk_score', // ...
];
```

### 4. –ü—Ä–æ—Ñ–∏–ª—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–§–∞–π–ª**: `components/members/participant-profile-card.tsx`

#### 4.1. State

```typescript
interface FieldState {
  full_name: string
  email: string
  phone: string
  bio: string // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
  notes: string
  custom_attributes: Record<string, any>
}

const [fields, setFields] = useState<FieldState>({
  full_name: participant.full_name || '',
  email: participant.email || '',
  phone: participant.phone || '',
  bio: participant.bio || '', // ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  notes: participant.notes || '',
  custom_attributes: participant.custom_attributes || {}
})
```

#### 4.2. UI –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```tsx
{/* Bio (–∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ) */}
{editing ? (
  <div>
    <label className="text-sm font-medium text-gray-700">–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ</label>
    <Input
      value={fields.bio}
      onChange={e => handleChange('bio', e.target.value)}
      disabled={pending}
      className="mt-1"
      placeholder="–î–æ–ª–∂–Ω–æ—Å—Ç—å, –∏–Ω—Ç–µ—Ä–µ—Å—ã, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (–¥–æ 60 —Å–∏–º–≤–æ–ª–æ–≤)"
      maxLength={60}
    />
    <p className="mt-1 text-xs text-gray-500">
      {fields.bio.length}/60 —Å–∏–º–≤–æ–ª–æ–≤
    </p>
  </div>
) : participant.bio ? (
  <div>
    <p className="text-lg text-gray-600">{participant.bio}</p>
  </div>
) : null}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- `maxLength={60}` - –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
- –°—á–µ—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ (–≤ —Ä–µ–∂–∏–º–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞)
- –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π

#### 4.3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

```typescript
body: JSON.stringify({
  orgId,
  full_name: fields.full_name,
  email: fields.email,
  phone: fields.phone,
  bio: fields.bio, // ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
  notes: fields.notes,
  custom_attributes: fields.custom_attributes
})
```

#### 4.4. –û—Ç–º–µ–Ω–∞

```typescript
const handleCancel = () => {
  setEditing(false)
  setFields({
    full_name: participant.full_name || '',
    email: participant.email || '',
    phone: participant.phone || '',
    bio: participant.bio || '', // ‚úÖ –°–±—Ä–æ—Å
    notes: participant.notes || '',
    custom_attributes: participant.custom_attributes || {}
  })
  setError(null)
}
```

### 5. –ö–∞—Ä—Ç–æ—á–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤ —Å–ø–∏—Å–∫–µ

**–§–∞–π–ª**: `components/members/member-card.tsx`

#### –ë—ã–ª–æ (–æ—Ç–æ–±—Ä–∞–∂–∞–ª—Å—è email):

```tsx
const username = participant.tg_username
  ? `@${participant.tg_username}`
  : participant.email || ''

{/* Username –∏–ª–∏ email */}
{username && (
  <p className="text-sm text-gray-500">{username}</p>
)}
```

#### –°—Ç–∞–ª–æ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è bio):

```tsx
interface Participant {
  // ...
  bio: string | null // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
}

{/* –ò–º—è */}
<h3 className="mb-2 text-center text-lg font-semibold text-gray-900 group-hover:text-blue-600">
  {displayName}
</h3>

{/* –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (bio) */}
{participant.bio && (
  <p className="text-sm text-center text-gray-600 line-clamp-2">
    {participant.bio}
  </p>
)}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- `line-clamp-2` - –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ 2 —Å—Ç—Ä–æ–∫–∞–º–∏
- –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
- –°–µ—Ä—ã–π —Ü–≤–µ—Ç –¥–ª—è –≤—Ç–æ—Ä–∏—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `bio` –∑–∞–ø–æ–ª–Ω–µ–Ω–æ

### 6. –ü–æ–∏—Å–∫

**–§–∞–π–ª**: `components/members/members-view.tsx`

#### 6.1. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```typescript
interface Participant {
  id: string
  full_name: string | null
  tg_username: string | null
  tg_user_id: string | null
  email: string | null
  bio: string | null // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
  custom_attributes: any
  participant_status: string
  photo_url: string | null
  created_at?: string
}
```

#### 6.2. –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

```typescript
const filteredParticipants = useMemo(() => {
  if (!searchQuery.trim()) {
    return participants
  }

  const query = searchQuery.toLowerCase()
  return participants.filter((p) => {
    const fullName = (p.full_name || '').toLowerCase()
    const username = (p.tg_username || '').toLowerCase()
    const email = (p.email || '').toLowerCase()
    const bio = (p.bio || '').toLowerCase() // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ

    return (
      fullName.includes(query) ||
      username.includes(query) ||
      email.includes(query) ||
      bio.includes(query) // ‚úÖ –ü–æ–∏—Å–∫ –ø–æ bio
    )
  })
}, [participants, searchQuery])
```

#### 6.3. –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä

```tsx
<input
  type="text"
  placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, –æ–ø–∏—Å–∞–Ω–∏—é, email, @username..."
  value={searchQuery}
  onChange={(e) => setSearchQuery(e.target.value)}
/>
```

## –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –®–∞–≥ 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤ Supabase

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Supabase Dashboard** ‚Üí **SQL Editor**
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `db/migrations/28_add_participant_bio.sql`
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ
SELECT column_name, data_type, character_maximum_length
FROM information_schema.columns
WHERE table_name = 'participants' 
  AND column_name = 'bio';

-- –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
-- column_name | data_type | character_maximum_length
-- bio         | text      | null

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å constraint
SELECT constraint_name, check_clause
FROM information_schema.check_constraints
WHERE constraint_name = 'bio_max_length';

-- –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
-- constraint_name | check_clause
-- bio_max_length  | (char_length(bio) <= 60)

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–µ–∫—Å
SELECT indexname, indexdef
FROM pg_indexes
WHERE tablename = 'participants' 
  AND indexname = 'idx_participants_bio';
```

### –®–∞–≥ 3: –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å –∫–æ–¥

–ö–æ–¥ —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é. –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –¥–µ–ø–ª–æ—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å—Ç—É–ø—è—Ç –≤ —Å–∏–ª—É.

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ bio –≤ –ø—Ä–æ—Ñ–∏–ª—å

```
1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å —É—á–∞—Å—Ç–Ω–∏–∫–∞
2. –ù–∞–∂–∞—Ç—å "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ": "–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º, —É–≤–ª–µ–∫–∞—é—Å—å —Ñ—É—Ç–±–æ–ª–æ–º"
4. –í–∏–¥–µ—Ç—å —Å—á–µ—Ç—á–∏–∫: "46/60 —Å–∏–º–≤–æ–ª–æ–≤"
5. –ù–∞–∂–∞—Ç—å "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
6. ‚úÖ Bio –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ–¥ –∏–º–µ–Ω–µ–º –≤ –ø—Ä–æ—Ñ–∏–ª–µ
7. ‚úÖ Bio –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∫–∞—Ä—Ç–æ—á–∫–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤ —Å–ø–∏—Å–∫–µ
```

### –ü—Ä–∏–º–µ—Ä 2: –ü–æ–∏—Å–∫ –ø–æ bio

```
1. –û—Ç–∫—Ä—ã—Ç—å —Å–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
2. –í –ø–æ–∏—Å–∫–µ –≤–≤–µ—Å—Ç–∏ "–º–µ–Ω–µ–¥–∂–µ—Ä"
3. ‚úÖ –ù–∞–π–¥–µ–Ω—ã –≤—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ —Å "–º–µ–Ω–µ–¥–∂–µ—Ä" –≤ bio
4. –í–≤–µ—Å—Ç–∏ "—Ñ—É—Ç–±–æ–ª"
5. ‚úÖ –ù–∞–π–¥–µ–Ω—ã —É—á–∞—Å—Ç–Ω–∏–∫–∏ —Å "—Ñ—É—Ç–±–æ–ª" –≤ bio
```

### –ü—Ä–∏–º–µ—Ä 3: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã

```
1. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
2. –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –≤–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç –¥–ª–∏–Ω–Ω–µ–µ 60 —Å–∏–º–≤–æ–ª–æ–≤
3. ‚úÖ –í–≤–æ–¥ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞ 60 —Å–∏–º–≤–æ–ª–µ (–∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è)
4. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –æ–±–æ–π—Ç–∏ —á–µ—Ä–µ–∑ API
5. ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Ç–∫–ª–æ–Ω–∏—Ç –∑–∞–ø–∏—Å—å (CHECK constraint)
```

## –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ö–∞—Ä—Ç–æ—á–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞ (–¥–æ):

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ        [–§–æ—Ç–æ]           ‚îÇ
‚îÇ                         ‚îÇ
‚îÇ    –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤          ‚îÇ
‚îÇ    @ivan_ivanov         ‚îÇ ‚Üê username –∏–ª–∏ email
‚îÇ                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ö–∞—Ä—Ç–æ—á–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞ (–ø–æ—Å–ª–µ):

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ        [–§–æ—Ç–æ]           ‚îÇ
‚îÇ                         ‚îÇ
‚îÇ    –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤          ‚îÇ
‚îÇ    –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ          ‚îÇ ‚Üê bio (–∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ)
‚îÇ    –ø—Ä–æ–¥–∞–∂–∞–º             ‚îÇ
‚îÇ                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü—Ä–æ—Ñ–∏–ª—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ (—Ä–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞):

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   [–ì—Ä–∞–¥–∏–µ–Ω—Ç]                        ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ   [–§–æ—Ç–æ]                            ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ   –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤                       ‚îÇ ‚Üê full_name
‚îÇ   –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º, —Ñ—É—Ç–±–æ–ª      ‚îÇ ‚Üê bio
‚îÇ                                     ‚îÇ
‚îÇ   [–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è]           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü—Ä–æ—Ñ–∏–ª—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ (—Ä–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è):

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ü–æ–ª–Ω–æ–µ –∏–º—è                        ‚îÇ
‚îÇ   [–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤____________]         ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ   –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ                  ‚îÇ
‚îÇ   [–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º, —Ñ—É—Ç–±–æ–ª__]  ‚îÇ
‚îÇ   46/60 —Å–∏–º–≤–æ–ª–æ–≤                    ‚îÇ ‚Üê –°—á–µ—Ç—á–∏–∫
‚îÇ                                     ‚îÇ
‚îÇ   [Email] [Phone] [Created At]      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –í–∞–ª–∏–¥–∞—Ü–∏—è

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è (Frontend)

- `maxLength={60}` –Ω–∞ input —ç–ª–µ–º–µ–Ω—Ç–µ
- –°—á–µ—Ç—á–∏–∫ —Å–∏–º–≤–æ–ª–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –í–∏–∑—É–∞–ª—å–Ω–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ –æ –ª–∏–º–∏—Ç–µ

### –°–µ—Ä–≤–µ—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è (Database)

```sql
-- CHECK constraint –≤ PostgreSQL
ALTER TABLE participants
ADD CONSTRAINT bio_max_length CHECK (char_length(bio) <= 60);
```

**–¢–µ—Å—Ç**:
```sql
-- ‚ùå –≠—Ç–æ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç
INSERT INTO participants (org_id, full_name, bio)
VALUES ('...', 'Test', '–û—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –∫–æ—Ç–æ—Ä—ã–π —Ç–æ—á–Ω–æ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç –≤ —à–µ—Å—Ç—å–¥–µ—Å—è—Ç —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –∫—Ä–∞—Ç–∫–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è');

-- –û—à–∏–±–∫–∞: new row for relation "participants" violates check constraint "bio_max_length"

-- ‚úÖ –≠—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç
INSERT INTO participants (org_id, full_name, bio)
VALUES ('...', 'Test', '–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º');
```

## –ü–æ–∏—Å–∫ –∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è

### GIN –∏–Ω–¥–µ–∫—Å —Å –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–º –ø–æ–∏—Å–∫–æ–º

```sql
CREATE INDEX idx_participants_bio 
ON participants USING gin (to_tsvector('russian', coalesce(bio, '')));
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ë—ã—Å—Ç—Ä—ã–π –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ—Ä—Ñ–æ–ª–æ–≥–∏–∏ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
- –ü–æ–∏—Å–∫ –ø–æ —Å–ª–æ–≤–æ—Ñ–æ—Ä–º–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–º–µ–Ω–µ–¥–∂–µ—Ä" –Ω–∞–π–¥–µ—Ç "–º–µ–Ω–µ–¥–∂–µ—Ä—ã")

**–¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**:

```sql
-- –ë–µ–∑ –∏–Ω–¥–µ–∫—Å–∞ (–º–µ–¥–ª–µ–Ω–Ω–æ –Ω–∞ –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö)
EXPLAIN ANALYZE
SELECT * FROM participants
WHERE bio ILIKE '%–º–µ–Ω–µ–¥–∂–µ—Ä%';

-- –° GIN –∏–Ω–¥–µ–∫—Å–æ–º (–±—ã—Å—Ç—Ä–æ)
EXPLAIN ANALYZE
SELECT * FROM participants
WHERE to_tsvector('russian', coalesce(bio, '')) @@ to_tsquery('russian', '–º–µ–Ω–µ–¥–∂–µ—Ä');
```

## –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å `bio` –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:

```sql
-- –ü—Ä–∏–º–µ—Ä: –≤–∑—è—Ç—å –ø–µ—Ä–≤—ã–µ 60 —Å–∏–º–≤–æ–ª–æ–≤ –∏–∑ notes
UPDATE participants
SET bio = LEFT(notes, 60)
WHERE bio IS NULL 
  AND notes IS NOT NULL 
  AND char_length(notes) > 0;

-- –ò–ª–∏ –∏–∑ custom_attributes
UPDATE participants
SET bio = custom_attributes->>'position'
WHERE bio IS NULL 
  AND custom_attributes ? 'position'
  AND char_length(custom_attributes->>'position') <= 60;
```

## –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. ‚úÖ `db/migrations/28_add_participant_bio.sql` - –Ω–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
2. ‚úÖ `lib/types/participant.ts` - –¥–æ–±–∞–≤–ª–µ–Ω `bio` –≤ `ParticipantRecord`
3. ‚úÖ `app/api/participants/[participantId]/route.ts` - –¥–æ–±–∞–≤–ª–µ–Ω `bio` –≤ `allowedFields`
4. ‚úÖ `components/members/participant-profile-card.tsx` - UI –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è bio
5. ‚úÖ `components/members/member-card.tsx` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ bio –≤ –∫–∞—Ä—Ç–æ—á–∫–µ (–≤–º–µ—Å—Ç–æ email)
6. ‚úÖ `components/members/members-view.tsx` - –ø–æ–∏—Å–∫ –ø–æ bio

## FAQ

### Q: –ü–æ—á–µ–º—É 60 —Å–∏–º–≤–æ–ª–æ–≤?

**A**: –≠—Ç–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –¥–ª—è –∫—Ä–∞—Ç–∫–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è:
- –ü–æ–º–µ—â–∞–µ—Ç—Å—è –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞ (2 —Å—Ç—Ä–æ–∫–∏ √ó 30 —Å–∏–º–≤–æ–ª–æ–≤)
- –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –¥–æ–ª–∂–Ω–æ—Å—Ç–∏/—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –ù–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ê–Ω–∞–ª–æ–≥ Twitter bio (—Ä–∞–Ω—å—à–µ –±—ã–ª 160, —Å–µ–π—á–∞—Å —É—Ä–µ–∑–∞–ª–∏)

### Q: –ú–æ–∂–Ω–æ –ª–∏ —É–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç?

**A**: –î–∞, –Ω–æ –Ω—É–∂–Ω–æ:
1. –ò–∑–º–µ–Ω–∏—Ç—å CHECK constraint –≤ –ë–î:
   ```sql
   ALTER TABLE participants DROP CONSTRAINT bio_max_length;
   ALTER TABLE participants ADD CONSTRAINT bio_max_length CHECK (char_length(bio) <= 100);
   ```
2. –û–±–Ω–æ–≤–∏—Ç—å `maxLength` –≤ `<Input>` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö (–º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ CSS)

### Q: –ü–æ—á–µ–º—É bio –≤–º–µ—Å—Ç–æ email –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö?

**A**: 
- **Bio –±–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–µ–Ω**: "–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º" vs "ivan@example.com"
- **Email –ø—Ä–∏–≤–∞—Ç–µ–Ω**: –Ω–µ –≤—Å–µ–≥–¥–∞ —Ö–æ—á–µ—Ç—Å—è –µ–≥–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤—Å–µ–º
- **Email –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –ø—Ä–æ—Ñ–∏–ª–µ**: –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É
- **–õ—É—á—à–∏–π UX**: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å—Ä–∞–∑—É –≤–∏–¥—è—Ç, –∫—Ç–æ –µ—Å—Ç—å –∫—Ç–æ

### Q: –ß—Ç–æ –µ—Å–ª–∏ bio –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω?

**A**: –ù–∏—á–µ–≥–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è (—Ç–æ–ª—å–∫–æ –∏–º—è –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ).

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `bio` (–∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ) –¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å:
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –≤ 60 —Å–∏–º–≤–æ–ª–æ–≤ (–∫–ª–∏–µ–Ω—Ç + —Å–µ—Ä–≤–µ—Ä)
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö (–≤–º–µ—Å—Ç–æ email)
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤ –ø—Ä–æ—Ñ–∏–ª–µ (–ø–æ–¥ –∏–º–µ–Ω–µ–º)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–æ–∏—Å–∫–∞ (—Å GIN –∏–Ω–¥–µ–∫—Å–æ–º)
- ‚úÖ –°—á–µ—Ç—á–∏–∫–æ–º —Å–∏–º–≤–æ–ª–æ–≤ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- ‚úÖ –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–º –ø–æ–∏—Å–∫–æ–º –Ω–∞ —Ä—É—Å—Å–∫–æ–º

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç–∞–ª –±–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º –∏ —É–¥–æ–±–Ω—ã–º! üéâ

