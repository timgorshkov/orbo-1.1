# –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π Telegram-–±–æ—Ç–æ–≤

## –ü—Ä–æ–±–ª–µ–º–∞

–†–∞–Ω–µ–µ –æ–±–∞ –±–æ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏ User ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, —á—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ –ø—É—Ç–∞–Ω–∏—Ü—É:
- **orbo_community_bot** –æ—Ç–ø—Ä–∞–≤–ª—è–ª User ID –ø—Ä–∏ `/start` –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- **orbo_assistant_bot** –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª User ID
- –í –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è—Ö —É–ø–æ–º–∏–Ω–∞–ª—Å—è @orbo_assistant_bot, –Ω–æ ID –ø—Ä–∏—Ö–æ–¥–∏–ª –æ—Ç –¥—Ä—É–≥–æ–≥–æ –±–æ—Ç–∞

## –†–µ—à–µ–Ω–∏–µ

–†–∞–∑–¥–µ–ª–µ–Ω—ã —Ä–æ–ª–∏ –±–æ—Ç–æ–≤ —Å–æ–≥–ª–∞—Å–Ω–æ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é:

### ü§ñ orbo_assistant_bot (notifications bot)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä—è–º–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

**–§—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ User ID –ø—Ä–∏ `/start`
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–æ–≤ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ —Å–æ–±—ã—Ç–∏—è—Ö
- ‚úÖ –°–ø—Ä–∞–≤–∫–∞ –ø–æ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ `/help`

**–ö–æ–º–∞–Ω–¥—ã:**
- `/start` - –ø–æ–ª—É—á–∏—Ç—å User ID –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `/help` - –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É —Å User ID

### ü§ñ orbo_community_bot (main bot)
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–∞–±–æ—Ç–∞ —Å –≥—Ä—É–ø–ø–∞–º–∏

**–§—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ Telegram-–≥—Ä—É–ø–ø—ã
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –≤ –≥—Ä—É–ø–ø–∞—Ö (–Ω–æ–≤—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏, —Å–æ–æ–±—â–µ–Ω–∏—è, —Ä–µ–∞–∫—Ü–∏–∏)
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–¥—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- ‚úÖ –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ @orbo_assistant_bot –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–ö–æ–º–∞–Ω–¥—ã –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö:**
- `/start`, `/help` - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ @orbo_assistant_bot

**–ö–æ–º–∞–Ω–¥—ã –≤ –≥—Ä—É–ø–ø–∞—Ö:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –≥—Ä—É–ø–ø—ã

## –í–Ω–µ—Å—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. app/api/telegram/notifications/webhook/route.ts
**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ orbo_assistant_bot:**

- ‚úÖ –£–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ participant
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ User ID –ø—Ä–∏ `/start`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥—Ä–æ–±–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞ —Å User ID –ø—Ä–∏ `/help`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ–∂–∏–¥–∞—é—â–∏–µ –∫–æ–¥—ã –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ –£–±—Ä–∞–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ activity_events (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç participant)

**–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ `/start`:**
```
üëã –ü—Ä–∏–≤–µ—Ç, {–∏–º—è}!

ü§ñ Orbo Assistant Bot

–í–∞—à Telegram User ID: `{id}`

üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à User ID –≤—ã—à–µ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Orbo
3. –û—Ç–∫—Ä–æ–π—Ç–µ "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –∞–∫–∫–∞—É–Ω—Ç–∞"
4. –í—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à User ID
5. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏"
6. –í—ã –ø–æ–ª—É—á–∏—Ç–µ –∫–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∑–¥–µ—Å—å
7. –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
```

### 2. app/api/telegram/webhook/route.ts
**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ orbo_community_bot:**

- ‚úÖ –£–±—Ä–∞–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ User ID –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ @orbo_assistant_bot

**–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ `/start` –∏ `/help`:**
```
ü§ñ Orbo Community Bot

–≠—Ç–æ—Ç –±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram-–≥—Ä—É–ø–ø–∞–º–∏.

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤–∞—à–µ–≥–æ User ID –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
üëâ @orbo_assistant_bot

–û—Ç–∫—Ä–æ–π—Ç–µ @orbo_assistant_bot –∏ –Ω–∞–∂–º–∏—Ç–µ /start
```

### 3. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
**–ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è:**

- ‚úÖ `app/app/[org]/telegram/account/page.tsx` - –≤–µ–∑–¥–µ @orbo_assistant_bot
- ‚úÖ `app/app/[org]/telegram/setup-telegram/page.tsx` - –≤–µ–∑–¥–µ @orbo_assistant_bot

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π

### –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è Telegram-–∞–∫–∫–∞—É–Ω—Ç–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Orbo
2. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –∞–∫–∫–∞—É–Ω—Ç–∞"
3. –í–∏–¥–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –æ—Ç–∫—Ä—ã—Ç—å **@orbo_assistant_bot** ‚úÖ
4. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç @orbo_assistant_bot –≤ Telegram
5. –ù–∞–∂–∏–º–∞–µ—Ç `/start`
6. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç User ID ‚úÖ
7. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–æ–ø–∏—Ä—É–µ—Ç ID –∏ –≤—Å—Ç–∞–≤–ª—è–µ—Ç –≤ –≤–µ–±-—Ñ–æ—Ä–º—É
8. –ù–∞–∂–∏–º–∞–µ—Ç "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥"
9. –ö–æ–¥ –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ—Ç **@orbo_assistant_bot** ‚úÖ
10. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∫–æ–¥ –∏ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è

### –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ –æ—à–∏–±–∫–µ –æ—Ç–∫—Ä—ã–ª @orbo_community_bot:

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç @orbo_community_bot
2. –ù–∞–∂–∏–º–∞–µ—Ç `/start`
3. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –Ω–∞ @orbo_assistant_bot ‚úÖ
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –±–æ—Ç—É

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ü–æ–Ω—è—Ç–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π** - –∫–∞–∂–¥—ã–π –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –æ–±–ª–∞—Å—Ç—å
‚úÖ **–ù–µ—Ç –ø—É—Ç–∞–Ω–∏—Ü—ã** - User ID –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ—Ç —Ç–æ–≥–æ –±–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π —É–ø–æ–º—è–Ω—É—Ç –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è—Ö
‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏** - –ª–æ–≥–∏–∫–∞ –∫–∞–∂–¥–æ–≥–æ –±–æ—Ç–∞ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞
‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ–∂–∏–¥–∞–Ω–∏—è** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–Ω–∞–µ—Ç, –¥–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω –∫–∞–∂–¥—ã–π –±–æ—Ç

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Webhook endpoints:
- `/api/telegram/webhook` - orbo_community_bot (–≥—Ä—É–ø–ø—ã)
- `/api/telegram/notifications/webhook` - orbo_assistant_bot (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)

### Environment variables:
- `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω orbo_community_bot
- `TELEGRAM_NOTIFICATIONS_BOT_TOKEN` - —Ç–æ–∫–µ–Ω orbo_assistant_bot
- `TELEGRAM_WEBHOOK_SECRET` - —Å–µ–∫—Ä–µ—Ç –¥–ª—è orbo_community_bot
- `TELEGRAM_NOTIFICATIONS_WEBHOOK_SECRET` - —Å–µ–∫—Ä–µ—Ç –¥–ª—è orbo_assistant_bot

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã –≤ –∫–æ–¥
2. ‚è≥ –ù—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è:
   - –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ @orbo_assistant_bot
   - –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç @orbo_community_bot
3. ‚è≥ –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ webhook'–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è –æ–±–æ–∏—Ö –±–æ—Ç–æ–≤

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–±—Ä–æ—Å–∞ webhook'–æ–≤ (–µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è)

```bash
# –°–±—Ä–æ—Å webhook –¥–ª—è notifications bot
curl -X POST https://app.orbo.ru/api/telegram/admin/reset-webhook \
  -H "Content-Type: application/json" \
  -d '{"botType": "notifications"}'

# –°–±—Ä–æ—Å webhook –¥–ª—è main bot
curl -X POST https://app.orbo.ru/api/telegram/admin/reset-webhook \
  -H "Content-Type: application/json" \
  -d '{"botType": "main"}'
```


