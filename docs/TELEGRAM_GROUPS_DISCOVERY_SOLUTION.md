# –†–µ—à–µ–Ω–∏–µ: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ Telegram –≥—Ä—É–ø–ø –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ –ë–î

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ –ë–î —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –∑–Ω–∞–µ—Ç –æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –≥—Ä—É–ø–ø–∞—Ö, –ø–æ—Ç–æ–º—É —á—Ç–æ Telegram Bot API –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥ "–ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –≥—Ä—É–ø–ø—ã, –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω".

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ Telegram Bot API:** –ë–æ—Ç –º–æ–∂–µ—Ç —É–∑–Ω–∞—Ç—å –æ –≥—Ä—É–ø–ø–µ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑:
1. –°–æ–±—ã—Ç–∏–µ –≤ –≥—Ä—É–ø–ø–µ (—Å–æ–æ–±—â–µ–Ω–∏–µ, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∏ —Ç.–¥.)
2. –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ Chat ID

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï 1: –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–∞–∂–¥—É—é –≥—Ä—É–ø–ø—É (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –®–∞–≥ 1: –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

–í –∫–∞–∂–¥–æ–π –∏–∑ –≤–∞—à–∏—Ö 4 –≥—Ä—É–ø–ø, –≥–¥–µ –¥–æ–±–∞–≤–ª–µ–Ω `@orbo_community_bot`:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≥—Ä—É–ø–ø—É –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ **–ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**, –Ω–∞–ø—Ä–∏–º–µ—Ä:
   ```
   /start
   ```
   –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ
   ```
   –ü—Ä–∏–≤–µ—Ç!
   ```

3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ **5-10 —Å–µ–∫—É–Ω–¥**

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É

1. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ `https://app.orbo.ru/app/[org]/telegram/available-groups`
2. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
3. **–ì—Ä—É–ø–ø—ã –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è!**

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Üí webhook ‚Üí –∑–∞–ø–∏—Å—å –≤ `activity_events`
- API –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –≥—Ä—É–ø–ø—É —á–µ—Ä–µ–∑ `activity_events`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞—à–∏ –ø—Ä–∞–≤–∞ —á–µ—Ä–µ–∑ Telegram Bot API
- –î–æ–±–∞–≤–ª—è–µ—Ç –≥—Ä—É–ø–ø—É –≤ `telegram_groups` –∏ `telegram_group_admins`

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï 2: –î–æ–±–∞–≤—å—Ç–µ –≥—Ä—É–ø–ø—É –ø–æ Chat ID –≤—Ä—É—á–Ω—É—é

–ï—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è, –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É –ø–æ Chat ID:

### –®–∞–≥ 1: –£–∑–Ω–∞–π—Ç–µ Chat ID –≥—Ä—É–ø–ø—ã

**–°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ @getidsbot**
1. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ @getidsbot –≤ –≥—Ä—É–ø–ø—É
2. –ù–∞–ø–∏—à–∏—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –ë–æ—Ç –ø–æ–∫–∞–∂–µ—Ç Chat ID –≥—Ä—É–ø–ø—ã (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä `-1001234567890`)
4. –£–¥–∞–ª–∏—Ç–µ @getidsbot –∏–∑ –≥—Ä—É–ø–ø—ã

**–°–ø–æ—Å–æ–± 2: –ï—Å–ª–∏ –±–æ—Ç —É–∂–µ –ø–æ–ª—É—á–∞–ª —Å–æ–±—ã—Ç–∏—è**
```sql
-- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ Supabase SQL Editor
SELECT DISTINCT tg_chat_id 
FROM activity_events 
WHERE tg_chat_id IS NOT NULL
ORDER BY created_at DESC;
```

### –®–∞–≥ 2: –î–æ–±–∞–≤—å—Ç–µ –≥—Ä—É–ø–ø—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Telegram

1. –û—Ç–∫—Ä–æ–π—Ç–µ `https://app.orbo.ru/app/[org]/telegram`
2. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "–î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É –ø–æ Chat ID"
3. –í–≤–µ–¥–∏—Ç–µ Chat ID (–Ω–∞–ø—Ä–∏–º–µ—Ä, `-1001234567890`)
4. –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å"

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ webhook

–ï—Å–ª–∏ webhook —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –≥—Ä—É–ø–ø—ã –±—É–¥—É—Ç –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ª—é–±–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤ –Ω–∏—Ö.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å webhook:**

–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ BOT_TOKEN –Ω–∞ –≤–∞—à —Ç–æ–∫–µ–Ω orbo_community_bot
curl "https://api.telegram.org/bot<BOT_TOKEN>/getWebhookInfo"
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
```json
{
  "ok": true,
  "result": {
    "url": "https://app.orbo.ru/api/telegram/webhook",
    "has_custom_certificate": false,
    "pending_update_count": 0,
    "last_error_date": 0
  }
}
```

2. **–ï—Å–ª–∏ webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –ø–µ—Ä–µ–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ:**

```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_WEBHOOK_SECRET –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ .env
curl -X POST "https://api.telegram.org/bot<BOT_TOKEN>/setWebhook" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://app.orbo.ru/api/telegram/webhook",
    "secret_token": "<YOUR_WEBHOOK_SECRET>"
  }'
```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ webhook –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è:**

```sql
-- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ Supabase SQL Editor
SELECT COUNT(*), MAX(created_at) as last_event
FROM activity_events
WHERE tg_chat_id IS NOT NULL
AND created_at > NOW() - INTERVAL '1 hour';
```

–ï—Å–ª–∏ COUNT = 0 ‚Üí webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!

---

## üîß –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤: –ü–æ—á–µ–º—É –Ω–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è?

**Telegram Bot API –ù–ï –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã:**
- ‚ùå `getMyChats` - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ —á–∞—Ç—ã –±–æ—Ç–∞
- ‚ùå `getUserChats` - –ø–æ–ª—É—á–∏—Ç—å —á–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚ùå `getAdministratedChats` - –ø–æ–ª—É—á–∏—Ç—å —á–∞—Ç—ã, –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- ‚úÖ `getChatMember` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ö–û–ù–ö–†–ï–¢–ù–û–ú —á–∞—Ç–µ (–Ω—É–∂–µ–Ω chat_id)
- ‚úÖ `getUpdates` - –ø–æ–ª—É—á–∏—Ç—å —Å–æ–±—ã—Ç–∏—è (–Ω–æ —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ, –Ω–µ –≤—Å–µ –≥—Ä—É–ø–ø—ã)
- ‚úÖ Webhook - –ø–æ–ª—É—á–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**–ü–æ—ç—Ç–æ–º—É:**
- –ú—ã –Ω–µ –º–æ–∂–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ "–Ω–∞–π—Ç–∏ –≤—Å–µ –≥—Ä—É–ø–ø—ã, –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω"
- –ú—ã –º–æ–∂–µ–º —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –≤ –≥—Ä—É–ø–ø–∞—Ö, –æ –∫–æ—Ç–æ—Ä—ã—Ö —É–∂–µ –∑–Ω–∞–µ–º
- –ú—ã —É–∑–Ω–∞—ë–º –æ –≥—Ä—É–ø–ø–∞—Ö —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è (—Å–æ–æ–±—â–µ–Ω–∏—è, –¥–æ–±–∞–≤–ª–µ–Ω–∏—è)

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç: –ü–æ—á–µ–º—É –≥—Ä—É–ø–ø—ã –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è

- [ ] –ë–æ—Ç `@orbo_community_bot` –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É –∫–∞–∫ **–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**
- [ ] –í—ã - **–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä** –≤ —ç—Ç–æ–π –≥—Ä—É–ø–ø–µ
- [ ] –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ –ë–î
- [ ] Webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è

---

## üí° –£–ª—É—á—à–µ–Ω–∏–µ UX (TODO –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞)

–ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–î–æ—Å—Ç—É–ø–Ω—ã–µ –≥—Ä—É–ø–ø—ã":

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üì¢ –ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≥—Ä—É–ø–ø?                          ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ –ß—Ç–æ–±—ã —Å–∏—Å—Ç–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–∏–ª–∞ –≤–∞—à–∏ –≥—Ä—É–ø–ø—ã:           ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ 1. –û—Ç–∫—Ä–æ–π—Ç–µ –≥—Ä—É–ø–ø—É –≤ Telegram                   ‚îÇ
‚îÇ 2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä /start) ‚îÇ
‚îÇ 3. –û–±–Ω–æ–≤–∏—Ç–µ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ 5-10 —Å–µ–∫—É–Ω–¥     ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≥—Ä—É–ø–ø—É –≤—Ä—É—á–Ω—É—é –ø–æ Chat ID –Ω–∏–∂–µ ‚Üì   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## ‚úÖ –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

–ö–∞–∫ —Ç–æ–ª—å–∫–æ –≤—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Å–≤–æ–∏ 4 –≥—Ä—É–ø–ø—ã:

1. ‚úÖ Webhook –ø–æ–ª—É—á–∏—Ç —Å–æ–±—ã—Ç–∏—è
2. ‚úÖ –°–æ–∑–¥–∞—Å—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `activity_events`
3. ‚úÖ API –æ–±–Ω–∞—Ä—É–∂–∏—Ç –≥—Ä—É–ø–ø—ã
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç –≤–∞—à–∏ –ø—Ä–∞–≤–∞ —á–µ—Ä–µ–∑ `getChatMember`
5. ‚úÖ –î–æ–±–∞–≤–∏—Ç –≤ `telegram_groups` –∏ `telegram_group_admins`
6. ‚úÖ –ì—Ä—É–ø–ø—ã –ø–æ—è–≤—è—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ!

**–≠—Ç–æ –∑–∞–π–º—ë—Ç 2 –º–∏–Ω—É—Ç—ã!** ‚è±Ô∏è

---

**–î–ï–ô–°–¢–í–ò–ï:** –û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞–∂–¥—É—é –∏–∑ 4 –≥—Ä—É–ø–ø –≤ Telegram –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`, –∑–∞—Ç–µ–º –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥.

