# –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî 7 –Ω–æ—è–±—Ä—è 2025

## ‚úÖ –ß—Ç–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ:

### **Wave 0 Progress: ~70% Complete**

#### Block 0.2: Analytics Wow-Effect ‚úÖ **DONE**
- ‚úÖ **Group Analytics Dashboard** (Day 3)
  - 6 –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫ —Å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º
  - Attention Zones
  - –¢–æ–ø-–∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä—ã
- ‚úÖ **Message Import (JSON)** (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
- ‚úÖ **Participant Profile Enrichment** (Week 1)
  - OpenAI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (gpt-4o-mini)
  - Rule-based analyzers (roles, reactions)
  - Manual enrichment API —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç–∏
  - Daily cron –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ enrichment

#### AI Weekly Digest ‚úÖ **DONE** (Day 9-10 + fixes)
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ 096-100 (RLS, RPC —Ñ—É–Ω–∫—Ü–∏–∏, digest settings)
- ‚úÖ AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- ‚úÖ Hybrid approach (rule-based + AI enhancement)
- ‚úÖ Telegram DM –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ `orbo_assist_bot`
- ‚úÖ UI –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–∞–π–¥–∂–µ—Å—Ç–∞
- ‚úÖ Cron job –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ (Monday 9 AM)
- ‚úÖ Test send button

#### Monitoring & Logging ‚úÖ **DONE** (Day 8)
- ‚úÖ OpenAI API Logging (migration 094)
- ‚úÖ Cost monitoring –≤ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∫–µ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö AI –≤—ã–∑–æ–≤–æ–≤

---

## ‚ùå –ß—Ç–æ –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏–∑ Wave 0:

### **Block 0.1: Critical Stabilization** ‚ö†Ô∏è
- [ ] **Telegram Webhook Health Monitor**
  - Health check endpoint
  - Health status widget –≤ UI
  - Alert –ø—Ä–∏ disconnects >10 min
- [ ] **Basic Observability**
  - Structured logging (Pino)
  - Simple error dashboard page
  - Error aggregation
- [ ] **Admin Action Audit Log**
  - `admin_action_log` table
  - Helper function –¥–ª—è –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π
  - UI –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ audit log

### **Block 0.3: Quick Wins** ‚ö†Ô∏è
- [ ] **Event Attendance Insights**
  - No-show rates
  - Best time slots analysis
  - Attendance trends
- [ ] **QR Token Security**
  - Hash + TTL (prevent replay attacks)
  - Secure token generation
- [ ] **Telegram Admin Rights Verification**
  - Check bot status in groups
  - Prevent silent failures
- [ ] **Participant Deduplication UI**
  - Merge duplicates with 1 click
  - Smart duplicate detection
  - Merge history

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–Ω–∞ –≤—ã–±–æ—Ä):

### **–í–∞—Ä–∏–∞–Ω—Ç A: –ó–∞–≤–µ—Ä—à–∏—Ç—å Wave 0 (Block 0.1 + 0.3)**
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å + Quick Wins  
**–í—Ä–µ–º—è:** 2-3 –Ω–µ–¥–µ–ª–∏  
**–ü–æ–ª—å–∑–∞:**
- ‚úÖ –ü–æ–ª–Ω–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ operational overhead
- ‚úÖ Wow-—ç—Ñ—Ñ–µ–∫—Ç –æ—Ç deduplication UI
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å QR-–∫–æ–¥–æ–≤

**–ü–ª–∞–Ω:**
1. **Week 1 (Days 1-7):** Block 0.1 (Webhook health, Observability, Audit log)
2. **Week 2 (Days 8-14):** Block 0.3 (Event insights, QR security, Dedup UI)

---

### **–í–∞—Ä–∏–∞–Ω—Ç B: –ü–µ—Ä–µ–π—Ç–∏ –∫ Wave 1a (Client Payments)**
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** Revenue enablement  
**–í—Ä–µ–º—è:** 4 –Ω–µ–¥–µ–ª–∏  
**–ü–æ–ª—å–∑–∞:**
- ‚úÖ –ö–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –æ–ø–ª–∞—Ç—ã –∑–∞ —á–ª–µ–Ω—Å—Ç–≤–æ
- ‚úÖ –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏
- ‚úÖ Manual payment tracking (quick win)

**–ü–ª–∞–Ω:**
1. **Week 1-2:** Manual Payment Tracking
   - Payment schema (`subscriptions`, `payments`, `payment_methods`)
   - Manual payment UI (admin creates payment record)
   - Payment method config (text description)
   - Membership status sync
2. **Week 3-4:** Prodamus Integration Prep
   - Prodamus API research
   - Checkout link generation
   - Webhook handler (stub)
   - Payment reconciliation

---

### **–í–∞—Ä–∏–∞–Ω—Ç C: Wave 1b (Marketplace Foundation)**
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** Differentiator + External demand  
**–í—Ä–µ–º—è:** 4 –Ω–µ–¥–µ–ª–∏  
**–ü–æ–ª—å–∑–∞:**
- ‚úÖ Extension system (internal + external modules)
- ‚úÖ Daily Digest module (—É–∂–µ –µ—Å—Ç—å!)
- ‚úÖ Conflict Signals module
- ‚úÖ Revenue from external partners

**–ü–ª–∞–Ω:**
1. **Week 1-2:** Marketplace Schema + Runtime
   - Extension tables (`extensions`, `installations`, `permissions`)
   - Permission model (scoped access)
   - API keys (per-extension auth tokens)
   - Extension SDK (stub)
2. **Week 3-4:** Internal Modules
   - Daily Digest module (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω! ‚úÖ)
   - Conflict Signals module (sentiment detection)
   - Marketplace UI (browse, install, configure)

---

### **–í–∞—Ä–∏–∞–Ω—Ç D: –ì–∏–±—Ä–∏–¥ (–ø–æ–ª—å–∑–∞ + —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å)**
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** Best of both worlds  
**–í—Ä–µ–º—è:** 3-4 –Ω–µ–¥–µ–ª–∏  

**–ü–ª–∞–Ω:**
1. **Week 1:** Block 0.1 (Webhook health + Observability) ‚Äî –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è prod
2. **Week 2:** Manual Payment Tracking ‚Äî quick revenue win
3. **Week 3:** Marketplace Foundation (Schema + API keys)
4. **Week 4:** Internal Modules (Conflict Signals + Marketplace UI)

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:

### **–í–∞—Ä–∏–∞–Ω—Ç D (–ì–∏–±—Ä–∏–¥)** üëà BEST CHOICE

**–ü–æ—á–µ–º—É:**
1. ‚úÖ **Webhook health monitor** ‚Äî –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è production stability
2. ‚úÖ **Manual payments** ‚Äî –±—ã—Å—Ç—Ä—ã–π win –¥–ª—è revenue
3. ‚úÖ **Marketplace foundation** ‚Äî –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ç–æ—Ä, –µ—Å—Ç—å –≤–Ω–µ—à–Ω–∏–π –∑–∞–ø—Ä–æ—Å
4. ‚úÖ **Conflict Signals** ‚Äî wow-—ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è community management
5. ‚úÖ Balanced: 50% stability, 50% growth features

**Trade-offs:**
- ‚ùå Event attendance insights –æ—Ç–ª–æ–∂–µ–Ω—ã (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
- ‚ùå QR security –æ—Ç–ª–æ–∂–µ–Ω–∞ (–Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞—Ç–∞–∫)
- ‚ùå Deduplication UI –æ—Ç–ª–æ–∂–µ–Ω–∞ (–º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é –ø–æ–∫–∞)

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞ (Wave 0 –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ):

### Wave 0 Success Criteria (–∏–∑ —Ä–æ–∞–¥–º–∞–ø–∞):
- [ ] Zero webhook failures >10min undetected ‚Üê **Need Block 0.1**
- [ ] Errors visible in simple dashboard ‚Üê **Need Block 0.1**
- [x] 3 orgs using analytics dashboard daily ‚úÖ
- [x] 10k+ messages imported successfully ‚úÖ
- [x] "Wow" feedback from at least 2 test users ‚úÖ

**–í—ã–≤–æ–¥:** –ù—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ Block 0.1 –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Wave 0! üéØ

---

## üî• Immediate Action Plan (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è):

### **Next 2 Weeks:**

#### **Week 1: Block 0.1 (Stabilization)**
**Day 1-2:** Webhook Health Monitor
- [ ] Health check endpoint (`/api/telegram/health`)
- [ ] Health status widget –≤ settings UI
- [ ] Webhook reconnection logic
- [ ] Alert –ø—Ä–∏ disconnect >10 min

**Day 3-4:** Basic Observability
- [ ] Replace console.* with Pino (structured logs)
- [ ] Create simple error dashboard page
- [ ] Error aggregation query
- [ ] Email digest once/day with error summary

**Day 5-7:** Admin Action Audit Log
- [ ] Migration: `admin_action_log` table
- [ ] Helper function: `logAdminAction()`
- [ ] UI: Audit log viewer
- [ ] Test end-to-end

#### **Week 2: Manual Payment Tracking**
**Day 8-10:** Payment Schema + API
- [ ] Migration: `subscriptions`, `payments`, `payment_methods`
- [ ] API: CRUD operations for payments
- [ ] Manual payment status update logic
- [ ] Membership status sync

**Day 11-14:** Payment UI
- [ ] Payment creation form (admin)
- [ ] Payment history view
- [ ] Status display in member profiles
- [ ] Email notifications on status change

---

## üéØ Decision Point:

**–í–æ–ø—Ä–æ—Å:** –ö–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –≤—ã–±–∏—Ä–∞–µ–º?
- **A:** –ó–∞–≤–µ—Ä—à–∏—Ç—å Wave 0 (Block 0.1 + 0.3) ‚Äî 2-3 –Ω–µ–¥–µ–ª–∏
- **B:** Wave 1a (Client Payments) ‚Äî 4 –Ω–µ–¥–µ–ª–∏
- **C:** Wave 1b (Marketplace) ‚Äî 4 –Ω–µ–¥–µ–ª–∏
- **D:** –ì–∏–±—Ä–∏–¥ (Stabilization + Payments + Marketplace foundation) ‚Äî 3-4 –Ω–µ–¥–µ–ª–∏ ‚≠ê **RECOMMENDED**

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ Ready for Next Phase  
**Wave 0 Progress:** ~70% (–Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ Block 0.1)  
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í–∞—Ä–∏–∞–Ω—Ç D (–ì–∏–±—Ä–∏–¥)

