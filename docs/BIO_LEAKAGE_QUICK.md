# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ê —É—Ç–µ—á–∫–∞ bio –∏ custom_attributes

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞ (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞)
–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≥—Ä—É–ø–ø—ã –≤ –Ω–æ–≤—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é —Å–∏—Å—Ç–µ–º–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–ª–∞ "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ" –∏ "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è" –∏–∑ –¥—Ä—É–≥–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏.

**–≠—Ç–æ —Å–∏—Å—Ç–µ–º–Ω–∞—è –æ—à–∏–±–∫–∞**, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞—Ä—É—à–∞–µ—Ç –∏–∑–æ–ª—è—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏.

---

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. –ö–æ–¥ (–≥–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é)
**–§–∞–π–ª:** `app/api/telegram/groups/add-to-org/route.ts`

**–ë—ã–ª–æ:**
```typescript
custom_attributes: participant.custom_attributes || {},
bio: participant.bio
```

**–°—Ç–∞–ª–æ:**
```typescript
// ‚úÖ –ù–ï –∫–æ–ø–∏—Ä—É–µ–º bio –∏ custom_attributes –∏–∑ –¥—Ä—É–≥–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
custom_attributes: {},
bio: null
```

---

### 2. –ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥—É–±–ª–µ–π
**–§–∞–π–ª:** `db/migrations/066_fix_bio_custom_attributes_leakage.sql`

**–õ–æ–≥–∏–∫–∞:**
1. –ù–∞—Ö–æ–¥–∏—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è—Ö
2. –û—Å—Ç–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –≤ **—Å–∞–º–æ–π —Å—Ç–∞—Ä–æ–π** –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
3. –û—á–∏—â–∞–µ—Ç –¥—É–±–ª–∏ **—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–∏ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã** (–Ω–µ –±—ã–ª–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã)

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞

### –®–∞–≥ 1: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ Supabase SQL Editor:
db/diagnose_bio_leakage.sql
```

–ü–æ–∫–∞–∂–µ—Ç –º–∞—Å—à—Ç–∞–± –ø—Ä–æ–±–ª–µ–º—ã.

---

### –®–∞–≥ 2: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ Supabase SQL Editor:
db/migrations/066_fix_bio_custom_attributes_leakage.sql
```

–û—á–∏—Å—Ç–∏—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

---

### –®–∞–≥ 3: –î–µ–ø–ª–æ–π –∫–æ–¥–∞
```bash
git add app/api/telegram/groups/add-to-org/route.ts
git commit -m "fix: prevent bio/custom_attributes leakage between orgs"
git push
```

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–ù–æ–≤—ã–µ –≥—Ä—É–ø–ø—ã:** —É—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —Å –ø—É—Å—Ç—ã–º–∏ bio/custom_attributes  
‚úÖ **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥—É–±–ª–∏:** –æ—á–∏—â–µ–Ω—ã (–µ—Å–ª–∏ –±—ã–ª–∏ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã)  
‚úÖ **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –≤ –∫–∞–∂–¥–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏  
‚úÖ **–ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:** –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞! üîí

---

**–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `BIO_CUSTOM_ATTRIBUTES_LEAKAGE_FIX.md`

**–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é!** üöÄ

