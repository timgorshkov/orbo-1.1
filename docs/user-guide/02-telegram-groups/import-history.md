# Импорт истории сообщений

## Зачем это нужно

По умолчанию Orbo собирает только новые сообщения после подключения группы. Чтобы получить исторические данные:

- Профили всех участников (не только активных сейчас)
- Полную статистику активности
- Данные для AI-анализа интересов

Используйте импорт архива Telegram.

---

## Необходимые условия

- Группа подключена к Orbo
- Доступ к Telegram Desktop (для экспорта)
- Вы — участник или администратор группы

---

## Экспорт истории из Telegram

### Шаг 1. Откройте Telegram Desktop

Экспорт доступен только в десктопной версии:
- Windows: [Скачать](https://desktop.telegram.org/)
- macOS: [Скачать](https://macos.telegram.org/)

> ⚠️ **Важно:** Мобильные приложения не поддерживают экспорт.

### Шаг 2. Откройте нужную группу

Перейдите в группу, историю которой хотите экспортировать.

### Шаг 3. Откройте меню экспорта

1. Нажмите на **⋮** (три точки) в правом верхнем углу
2. Выберите **"Экспорт истории чата"**

Если пункта нет:
1. Откройте **Настройки → Продвинутые настройки**
2. Включите **"Экспорт данных Telegram"**

[СКРИНШОТ: Меню группы в Telegram Desktop с пунктом "Экспорт истории чата"]

### Шаг 4. Настройте параметры экспорта

| Параметр | Рекомендация |
|----------|--------------|
| Формат | **JSON** (предпочтительно) или HTML |
| Медиа | Можно отключить (уменьшает размер) |
| Размер файла | Не ограничивать |
| Период | Весь доступный период |

[СКРИНШОТ: Окно настройки экспорта — выбранные опции]

### Шаг 5. Дождитесь завершения

Экспорт может занять от нескольких секунд до часов в зависимости от размера группы.

После завершения вы получите папку с файлами:
- `result.json` — для JSON-формата
- `messages.html` — для HTML-формата

---

## Импорт в Orbo

### Шаг 1. Откройте раздел Telegram

В левом меню перейдите в **Telegram**.

### Шаг 2. Выберите группу

Откройте группу, для которой хотите импортировать историю.

### Шаг 3. Найдите кнопку импорта

На странице группы найдите:
- Кнопку **"Импортировать историю"**
- Или вкладку **"Импорт"**

[СКРИНШОТ: Страница группы с кнопкой "Импортировать историю"]

### Шаг 4. Загрузите файл

1. Нажмите **"Выбрать файл"**
2. Выберите `result.json` или `messages.html`
3. Нажмите **"Загрузить"**

### Шаг 5. Дождитесь обработки

Обработка происходит в фоновом режиме:
- Прогресс отображается на странице
- После завершения вы получите уведомление

---

## Результат

После импорта:

- ✅ Все сообщения добавятся в историю
- ✅ Создадутся профили всех участников
- ✅ Статистика обновится
- ✅ AI-анализ получит больше данных

---

## Что происходит при повторном импорте

- Дубликаты сообщений **не создаются**
- Новые сообщения **добавляются**
- Профили участников **обновляются**

Можно безопасно импортировать один и тот же архив несколько раз.

---

## Импорт из WhatsApp

Orbo также поддерживает импорт истории из WhatsApp.

### Экспорт из WhatsApp

1. Откройте чат в WhatsApp
2. Нажмите **⋮ → Ещё → Экспорт чата**
3. Выберите **"Без медиа"**
4. Сохраните файл

### Импорт в Orbo

1. Перейдите в **Telegram → WhatsApp**
2. Нажмите **"Импортировать чат WhatsApp"**
3. Загрузите `.txt` файл

[→ Подробнее об импорте WhatsApp](../03-participants-crm/whatsapp-import.md)

---

## Возможные проблемы

### Файл слишком большой

- Разбейте экспорт на периоды
- Отключите экспорт медиафайлов
- Используйте JSON вместо HTML

### Ошибка формата

- Убедитесь, что используете JSON или HTML
- Проверьте, что это экспорт из Telegram Desktop
- Не редактируйте файл вручную

### Не все сообщения импортировались

- Проверьте период экспорта
- Повторите экспорт с полным периодом
- Некоторые системные сообщения могут пропускаться

### Часовой пояс

Если время сообщений отличается — проверьте часовой пояс в настройках Telegram перед экспортом.

---

## Связанные статьи

- [Подключение группы](./connect-groups.md)
- [Импорт из WhatsApp](../03-participants-crm/whatsapp-import.md)
- [AI-анализ участников](../03-participants-crm/ai-enrichment.md)
